---
title: ImgSequence
description: Компонент для воспроизведения последовательности изображений на canvas с поддержкой различных стратегий загрузки и настройки воспроизведения
---

import ImgSequence from '@astro/components/img-sequence/ImgSequence.astro';
import Preview from '@/astrobook/utils/Preview.astro';
import { Tabs, TabItem } from '@astrojs/starlight/components';

<Preview name="img-sequence">
    <ImgSequence style='width: 100%; height: 100%;' />
</Preview>

## Описание

ImgSequence — это мощный компонент для работы с последовательностями изображений на HTML5 canvas. Он поддерживает различные стратегии загрузки кадров, гибкую настройку воспроизведения и рендеринга.

## Основные возможности

- Воспроизведение последовательностей изображений
- Оптимизированная загрузка кадров (lazy, instant, LOD)
- Гибкая настройка отображения (object-fit, object-position)
- Поддержка циклов и обратного воспроизведения
- Контроль FPS и диапазона кадров

## API

### ImgSequenceProps

#### `canvas` (required)

HTMLCanvasElement для отрисовки последовательности.

#### `loader` (required)

Конфигурация загрузчика кадров:

- `strategy`: `'instant' | 'lazy' | 'lod'` — стратегия загрузки
- `framesCount`: `number` — общее количество кадров
- `getFrameUrl`: `(idx: number) => string` — функция получения URL кадра
- `framesLoadingRange?`: `number` — диапазон загрузки для lazy стратегии
- `onReady?`: `() => void` — callback при готовности
- `onFullyLoaded?`: `() => void` — callback при полной загрузке

#### `playback?`

Опции воспроизведения:

- `fps?`: `number` — кадров в секунду (по умолчанию 30)
- `loop?`: `boolean` — зацикливание
- `reverse?`: `boolean` — обратное воспроизведение
- `minFrameIdx?`: `number` — минимальный индекс кадра
- `maxFrameIdx?`: `number` — максимальный индекс кадра

#### `render?`

Опции рендеринга:

- `objectFit?`: `'contain' | 'cover' | 'fill' | 'none' | 'scale-down'`
- `objectPosition?`: `[string, string]` — позиция объекта
- `shouldClear?`: `boolean` — очистка canvas перед рендером

#### `debug?`

`boolean` — включить отладочный режим

## Методы

- `play()` — начать воспроизведение
- `pause()` — приостановить воспроизведение
- `render(options?)` — отрисовать текущий кадр
- `destroy()` — уничтожить экземпляр и освободить ресурсы



## Использование

<Tabs>
  <TabItem label="Vanilla">
    ```javascript
    import { ImgSequence } from '@chipsa-ui/core';

    const canvas = document.getElementById('my-canvas');
    const imgSequence = new ImgSequence({
        canvas,
        playback: {
            fps: 30,
            loop: true,
        },
        loader: {
            strategy: 'lazy',
            framesCount: 100,
            getFrameUrl: (idx) => `/frames/frame-${idx}.webp`,
        },
        render: {
            objectFit: 'contain',
            objectPosition: ['center', 'center'],
        },
    });

    imgSequence.play();
    ```
  </TabItem>
  <TabItem label="React">
    ```tsx
    import { ImgSequence } from '@chipsa-ui/react';

    function MyComponent() {
        return (
            <ImgSequence
                options={{
                    playback: {
                        fps: 30,
                        loop: true,
                    },
                    loader: {
                        strategy: 'lazy',
                        framesCount: 100,
                        getFrameUrl: (idx) => `/frames/frame-${idx}.webp`,
                    },
                    render: {
                        objectFit: 'contain',
                        objectPosition: ['center', 'center'],
                    },
                }}
            />
        );
    }
    ```
  </TabItem>
</Tabs>